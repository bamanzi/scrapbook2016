<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-CN" xml:lang="zh-CN" xmlns="http://www.w3.org/1999/xhtml" class="dj_gecko dj_contentbox">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>netfilter/iptables 简介</title>
<link rel="schema.DC" href="http://purl.org/DC/elements/1.0/">
<link rel="SHORTCUT ICON" href="favicon.ico">
<meta name="DC.Rights" content="© Copyright&nbsp;IBM Corporation&nbsp;2002">
<meta name="Keywords" content="chains, firewalls, iptables, kernel, linux, netfilter, packet filtering, policy, rules, stateful, 链, 防火墙, 内核, 信息包过滤, 策略, 规则, 有状态, tttlca">
<meta name="DC.Date" scheme="iso8601" content="2002-09-11">
<meta name="Source" content="v17 delivery:developerWorks">
<meta name="Security" content="Public">
<meta name="Abstract" content="netfilter/iptables 是与最新的 2.4.x 版本 Linux 内核集成的 IP 信息包过滤系统。如果 Linux 系统连接到因特网或 LAN、服务器或连接 LAN 和因特网的代理服务器，则该系统有利于在 Linux 系统上更好地控制 IP 信息包过滤和防火墙配置。Mugdha Vairagade 将介绍 netfilter/iptables 系统、它是如何工作的、它的优点、安装和配置以及如何使用它来配置 Linux 系统上的防火墙以过滤 IP 信息包。">
<meta name="Description" content="netfilter/iptables 是与最新的 2.4.x 版本 Linux 内核集成的 IP 信息包过滤系统。如果 Linux 系统连接到因特网或 LAN、服务器或连接 LAN 和因特网的代理服务器，则该系统有利于在 Linux 系统上更好地控制 IP 信息包过滤和防火墙配置。Mugdha Vairagade 将介绍 netfilter/iptables 系统、它是如何工作的、它的优点、安装和配置以及如何使用它来配置 Linux 系统上的防火墙以过滤 IP 信息包。">
<meta name="IBM.Effective" scheme="W3CDTF" content="2002-09-11">
<meta name="Owner" content="developerWorks/China/IBM">
<meta name="DC.Language" scheme="rfc1766" content="zh-CN">
<meta name="IBM.SpecialPurpose" content="SP001">
<meta name="IBM.Country" content="CN">
<meta name="Robots" content="index,follow">
<meta name="DC.Type" scheme="IBM_ContentClassTaxonomy" content="CT316">
<meta name="DC.Subject" scheme="IBM_SubjectTaxonomy" content="SWGC0">
<meta name="dW.ContentArea" content="2">
<meta name="dW.Topic" content="208,1">

<meta scheme="IBM_WTMCategory" name="IBM.WTMCategory" content="SOFDCLNXCN">

<link rel="canonical" href="http://www.ibm.com/developerworks/cn/linux/network/s-netip/index.html">
<!-- HEADER_SCRIPTS_AND_CSS_INCLUDE -->


<!-- Masthead/footer -->




        
<!-- BEGIN: Use this section to set page specific variables for the Unica Page Tag -->

<!--END -->

   

  <!-- LEADSPACE_STYLES -->


<link rel="stylesheet" type="text/css" href="index.css" media="all">
</head>
<body aria-busy="false" class="v17" id="ibm-com">

	<div id="ibm-top" class="ibm-landing-page ibm-no-scroll"><img src="ibm_logo_print.png" id="ibm-print-masthead" alt="IBM Print" width="43" height="15">

<!-- MASTHEAD_BEGIN -->		
<div role="banner" id="ibm-masthead">

    <!-- TOP ROW -->    
	<div id="dw-masthead-top-row">
		<ul id="ibm-mast-options-dw" role="toolbar" aria-label="Masthead navigation">
			<li id="dw-mast-top-4" role="presentation">
				<a href="http://www.ibm.com/developerworks/cn/" tabindex="0"><img src="dwn-dw-badge.png" alt="dW" aria-label="dW" width="43" height="22"></a>
			</li>
			<li id="dw-mast-top-0" role="presentation">
				<div id="dw-mast-signin">
					<a id="dw-mf-signin-link" class="" href="http://www.ibm.com/developerworks/dwwi/jsp/ssologin.jsp?d=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F&amp;lang=zh_CN&amp;a=dwmav" title="" tabindex="2">登录</a>
					<span class="dw-mf-signin-spacer">|</span>
					<a id="dw-mf-reg-link" class="" href="http://www.ibm.com/developerworks/dwwi/jsp/ssoregister.jsp?d=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F&amp;lang=zh_CN&amp;a=dwmav" title="" tabindex="3">注册</a>
				</div>
				<div id="dw-mast-auth-link" class="dw-mf-hide">
					<a class="authenticated ibm-active" href="#" role="button" tabindex="2"></a>
					<ul id="dw-mast-auth-menu" class="dw-mf-hide">
						<li class="dw-mast-auth-menu-title" aria-hidden="true">developerWorks 社区</li>
						<li>
							<span class="dw-mast-auth-menu-arrow" aria-hidden="true">›</span><a href="http://www.ibm.com/developerworks/community/profiles/html/myProfileView.do?lang=zh" tabindex="3">我的概要信息</a>
						</li>
						<li>
							<span class="dw-mast-auth-menu-arrow" aria-hidden="true">›</span><a href="http://www.ibm.com/developerworks/community/groups/service/html/mycommunities?lang=zh" tabindex="4">我的社区</a>
						</li>
						<li>
							<span class="dw-mast-auth-menu-arrow" aria-hidden="true">›</span><a href="http://www.ibm.com/developerworks/community/news/?lang=zh" tabindex="5">设置</a>
						</li>
						<li class="dw-mast-auth-menu-divider"><hr></li>
						<li>
							<span class="dw-mast-auth-menu-arrow" aria-hidden="true">›</span><a id="dw-mast-signout-link" href="http://www.ibm.com/developerworks/dwwi/jsp/ssologout.jsp?d=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2F&amp;a=dwmav" tabindex="6">退出</a>
						</li>
					</ul>				
				</div>
			</li>
			<li id="dw-mast-top-1">
				<div></div>
			</li>
			<li id="dw-mast-top-3" role="presentation">
				<a href="http://www.ibm.com/cn/zh/" tabindex="1">IBM</a>
			</li>
		</ul>
	</div>

    <!-- BOTTOM ROW -->
	<div id="ibm-universal-nav-dw" aria-label="Site map">
		<ul id="ibm-unav-links-dw">
			<li id="ibm-unav-home-dwlogo">
				<a href="http://www.ibm.com/developerworks/cn/"><img src="dwn-dw-wordmark.png" alt="developerWorks®" width="225" height="28"></a>
			</li>
		</ul>
		<ul id="ibm-menu-links-dw" class="ibm-menu-links-dw-cn" role="toolbar" aria-label="Site map">
			<li id="dw-mast-nav-0" role="presentation"><a href="http://www.ibm.com/developerworks/cn/topics/" tabindex="0">技术主题</a></li>
			<li id="dw-mast-nav-1" role="presentation"><a href="http://www.ibm.com/developerworks/cn/downloads/" tabindex="0">软件下载</a></li>
			<li id="dw-mast-nav-2" role="presentation"><a href="http://www.ibm.com/developerworks/community/?lang=zh" tabindex="0">社区</a></li>
			<li id="dw-mast-nav-3" role="presentation"><a href="https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=6d7f9e5d-5f89-4767-a006-a81b8d186370&amp;lang=zh" tabindex="0">技术讲座</a></li>
		</ul>
		<form id="ibm-search-form" action="http://www.ibm.com/search/csass/search/" method="get" name="form1" aria-label="搜索 developerWorks" role="search">
			<p>
				<label for="q"><span class="ibm-access">搜索 developerWorks</span></label>
				<input id="q" name="q" value="搜索 developerWorks" maxlength="100" type="text">
				<input name="sn" value="dw" type="hidden">
				<input name="lang" value="zh" type="hidden">
				<input name="cc" value="CN" type="hidden">
				<input name="en" value="utf" type="hidden">
				<input name="hpp" value="20" type="hidden">
				<input name="dws" value="cndw" type="hidden">
				<input name="lo" value="zh" type="hidden">
				<input id="ibm-search" class="ibm-btn-search" value="提交" type="submit">
			</p>
		</form>
	</div>    
	
<div aria-label="社交工具" role="navigation" style="display: block;" id="ibm-social-tools"><ul aria-label="Social tool list" role="toolbar"><li><a tabindex="0" role="button" dojoattrid="0" rel="print" href="#" title="打印本页面" class="ibm-share-print">打印本页面</a></li><li><a tabindex="-1" role="button" dojoattrid="1" rel="email" href="#" title="用电子邮件发送本页面" class="ibm-share-email">用电子邮件发送本页面</a></li><li></li><li></li><li><a class="ibm-share-weibo" tabindex="-1" role="button" dojoattrid="2" rel="新浪微博" title="新浪微博" href="http://service.weibo.com/share/share.php?title=netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B&amp;url=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F&amp;language=zh_cn">新浪微博</a></li><li><a class="ibm-share-renren" tabindex="-1" role="button" dojoattrid="3" rel="人人网" title="人人网" href="http://share.renren.com/share/buttonshare?title=netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B&amp;link=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F">人人网</a></li><li><a class="dwcn-tencent-link" tabindex="-1" role="button" dojoattrid="4" rel="腾讯微博" title="腾讯微博" href="http://v.t.qq.com/share/share.php?title=netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B&amp;url=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F">腾讯微博</a></li><li><a class="dwcn-sohu-link" tabindex="-1" role="button" dojoattrid="5" rel="搜狐微博" title="搜狐微博" href="http://t.sohu.com/third/post.jsp?title=netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B%20&amp;link=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F">搜狐微博</a></li><li><a class="dwcn-netease-link" tabindex="-1" role="button" dojoattrid="6" rel="网易微博" title="网易微博" href="http://t.163.com/article/user/checkLogin.do?info=netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B%20http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F">网易微博</a></li><li><a class="ibm-share-digg" title="Digg" href="http://digg.com/submit?phase=2&amp;url=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F&amp;title=netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B" rel="digg" dojoattrid="7" role="button" tabindex="-1">Digg</a></li><li><a class="ibm-share-facebook" title="Facebook" href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F&amp;t=netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B" rel="facebook" dojoattrid="8" role="button" tabindex="-1">Facebook</a></li><li><a class="ibm-share-twitter" title="Twitter" href="http://twitter.com/?status=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F%20-%20netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B" rel="twitter" dojoattrid="9" role="button" tabindex="-1">Twitter</a></li><li><a class="ibm-share-delicious" title="Delicious" href="http://delicious.com/post?url=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F&amp;title=netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B" rel="delicious" dojoattrid="10" role="button" tabindex="-1">Delicious</a></li><li><a class="ibm-share-linkedin" title="Linked In" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F&amp;title=netfilter%2Fiptables%20%E7%AE%80%E4%BB%8B" rel="linkedin" dojoattrid="11" role="button" tabindex="-1">Linked In</a></li></ul></div></div>
<div id="fdiv" class="ibm-access"></div><!-- MASTHEAD_END -->
	    
<!-- LAYOUT -->
<!-- LEADSPACE_BEGIN --> 
<div role="main" id="ibm-access-cntr"><div id="ibm-leadspace-head">
	<!-- LEADSPACE_BODY_BEGIN --> 
	<div id="ibm-leadspace-body">
		<!-- Navigation_Trail_BEGIN -->
      <ul aria-label="Bread Crumbs" role="directory" id="ibm-navigation-trail"><li><a href="http://www.ibm.com/developerworks/cn/">developerWorks 中国</a></li><li><a href="http://www.ibm.com/developerworks/cn/topics/">技术主题</a></li><li><a href="http://www.ibm.com/developerworks/cn/linux/">Linux</a></li><li><a href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp">文档库</a></li></ul>
		<!-- END_Navigation_Trail -->
			<!-- Title_Subtitle -->
			<h1>netfilter/iptables 简介</h1><p><em><span>使用 netfilter/iptables 为 Linux（内核 2.4.x）配置防火墙</span></em></p>
	</div>
	<!-- LEADSPACE_BODY_END --> 
	<!-- SUMMARY_BEGIN -->
	<div id="dw-summary-area" class="dw-summary-columns">
		<div class="ibm-col-6-4">
		<p>netfilter/iptables 是与最新的 2.4.x 版本 Linux 内核集成的 IP 信息包过滤系统。如果 Linux 系统连接到因特网或 LAN、服务器或连接 LAN 和因特网的代理服务器，则该系统有利于在 Linux 系统上更好地控制 IP 信息包过滤和防火墙配置。Mugdha Vairagade 将介绍 netfilter/iptables 系统、它是如何工作的、它的优点、安装和配置以及如何使用它来配置 Linux 系统上的防火墙以过滤 IP 信息包。</p>
		<p class="ibm-no-print ibm-ind-link">

			
			<span id="nCmts"><span>1</span><img class="dw-cmts-arrow" alt="" src="dw-cmts-arrow.png" width="7" height="7"> <a href="#icomments" class="dw-cmt-link">评论</a></span>
		</p>
		</div>
		<div class="ibm-col-6-2 dw-toc-margin">
			<p class="dw-summary-author"><a role="button" href="#authorN10019" class="ibm-popup-link">Mugdha Vairagade</a> (<a href="mailto:vmugdha@indiatimes.com?subject=netfilter/iptables%20%E7%AE%80%E4%BB%8B&amp;cc=">vmugdha@indiatimes.com</a>), 独立开发人员</p>
<div id="authorN10019" class="ibm-common-overlay"><div class="ibm-head"><p><a href="#close" class="ibm-common-overlay-close">关闭 [x]</a></p></div><div class="ibm-body"><div class="ibm-main"><div class="ibm-title"><!--this is where the h2 usually
                                    goes--></div><div class="ibm-container ibm-alternate"><div class="ibm-container-body">
<p><!--.-->
Mugdha Vairagade 是一名开发人员，有在多个组织中工作的经验。在无线应用程序开发方面，她拥有相当丰富的经验，
而且专长于组件体系结构方面的工作。她对开放源码（Open Source）项目特别感兴趣，并且参与了 Linux Documentation Project、Forum Nokia（WAP 开发人员论坛）和 W3C 的工作。她还编写了有关 Linux 和 XML 技术的技术性文章。
可以通过
        <a href="mailto:vmugdha@indiatimes.com?cc=">vmugdha@indiatimes.com</a>与 Mugdha 联系。
      </p><br><br></div></div></div></div><div class="ibm-footer"><!----></div></div>
			<p class="dw-summary-date">2002 年 9 月 11 日</p>
			


			<div aria-hidden="true" class="ibm-container" id="dw-toc"><div class="ibm-container-body"><ul class="ibm-twisty"><li><a href="#toggle" class="ibm-twisty-trigger ibm-twisty-trigger-closed"><img src="c.gif" alt="expand"></a><span class="ibm-twisty-head">内容</span><div style="display: none;" class="ibm-twisty-body"><ul style="font-size: 0.8em;" class="ibm-link-list">
<li><a class="ibm-anchor-down-em-link" href="#N10037">Linux 安全性和 netfilter/iptables</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N10049">理解防火墙配置和信息包过滤</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N10061">为什么要配置自己的防火墙？</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N1006E">netfilter/iptables 系统是如何工作的？</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N100CF">安装 netfilter/iptables 系统</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N10160">建立规则和链</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N1030E">netfilter/iptables 系统的优点</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N10333">结束语</a></li>
<li><a class="ibm-anchor-down-em-link" href="#resources">参考资料 </a></li>
<li><a class="ibm-anchor-down-em-link" href="#icomments">评论</a></li></ul></div></li></ul></div></div>
		</div>
	</div>
	<!-- SUMMARY_END -->
</div><div id="ibm-pcon">

<!-- BEGIN_IBM-CONTENT -->
<div id="ibm-content">

<!-- BEGIN_IBM-CONTENT-BODY -->
<div id="ibm-content-body">

<!-- BEGIN_IBM-CONTENT-MAIN -->
<div id="ibm-content-main">

<!-- 1_1_COLUMN_BEGIN -->
<div class="ibm-columns">
<div class="ibm-col-1-1"><div class="dw-article-sidebar dw-bluemix" id="dwc-exp-a"><img src="bluemix-graphic.png" alt="" width="64" height="64"><p>在 IBM Bluemix 云平台上开发并部署您的下一个应用。</p><p class="ibm-button-link-alternate dw-button-green"><a id="tutc-sbar-bmix-home-btn-ABa" href="https://developer.ibm.com/sso/bmregistration?lang=zh_CN&amp;ca=dwchina-_-bluemix-_-s-netip-_-sidebar" class="dw-button-large">开始您的试用</a></p></div>

<p><strong>注：</strong>至少具备 Linux OS 的中级水平知识，以及配置 Linux 内核的经验，将有助于对本文的理解。
      </p><p>对于本文，我们将使用 iptables 用户空间工具版本 1.2.6a 和内核版本 2.4.9。</p><h2 id="N10037">Linux 安全性和 netfilter/iptables</h2><p>Linux 因其健壮性、可靠性、灵活性以及好象无限范围的可定制性而在 IT 业界变得非常受欢迎。Linux 具有许多内置的能力，
使开发人员可以根据自己的需要定制其工具、行为和外观，而无需昂贵的第三方工具。
如果 Linux 系统连接到因特网或 LAN、服务器或连接 LAN 和因特网的代理服务器，
所要用到的一种内置能力就是针对网络上 Linux 系统的防火墙配置。
可以在 
        <em>netfilter/iptables IP 信息包过滤系统</em>（它集成在 2.4.x 版本的 Linux 内核中）的帮助下运用这种能力。
      </p><p>
在如 
        <em>ipfwadm</em>和
        <em>ipchains</em> 这样的 Linux 信息包过滤解决方案中，netfilter/iptables IP 信息包过滤系统是最新的解决方案，
而且也是第一个集成到 Linux 内核的解决方案。
对于 Linux 系统管理员、网络管理员以及家庭用户（他们
想要根据自己特定的需求来配置防火墙、在防火墙解决方案上节省费用和对 IP 信息包过滤具有完全控制权）来说，netfilter/iptables 系统十分理想。
      </p><div class="ibm-alternate-rule"><hr></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N10049">理解防火墙配置和信息包过滤</h2><p>对于连接到网络上的 Linux 系统来说，防火墙是必不可少的防御机制，
它只允许合法的网络流量进出系统，而禁止其它任何网络流量。为了确定网络流量是否合法，
防火墙依靠它所包含的由网络或系统管理员预定义的一组
        <em>规则</em>。
这些规则告诉防火墙某个流量是否合法以及对于来自某个源、至某个目的地或具有某种协议类型的网络流量要做些什么。
术语“配置防火墙”是指添加、修改和除去这些规则。稍后，我将详细讨论这些
        <em>规则</em>。
      </p><p>
网络流量由 IP 信息包（或，简称
        <em>信息包</em>）— 以流的形式从源系统传输到目的地系统的一些小块数据 — 组成。
这些信息包有
        <em>头</em>，即在每个包前面所附带的一些数据位，它们包含有关信息包的源、目的地和协议类型的信息。
防火墙根据一组规则检查这些头，以确定接受哪个信息包以及拒绝哪个信息包。我们将该过程称为
        <em>信息包过滤</em>。
      </p><div class="ibm-alternate-rule"><hr></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N10061">为什么要配置自己的防火墙？</h2><p>出于各种因素和原因，需要根据特定需求来配置防火墙。
或许，最重要的原因是安全性。
</p><p>
管理员可能想让他们的防火墙能够阻止未经授权的源访问其 Linux 系统，例如通过 Telnet。
他们可能还想限制进出其系统的网络流量，以便只有来自可信源的流量才可以进入其系统，以及只有授权的流量才可以出去。
家庭用户可能通过允许所有的出站信息包都可以通过，将防火墙配置成较低的安全性级别。
</p><p>
另一个背后的原因是，通过阻塞来自类似广告站点之类的源的多余流量，可以节省带宽。
</p><p>
因而，可以定制防火墙配置来满足任何特定需求和任何安全性级别需求。
这就是 netfilter/iptables 系统的用武之处。
</p><div class="ibm-alternate-rule"><hr></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N1006E">netfilter/iptables 系统是如何工作的？</h2><p>netfilter/iptables IP 信息包过滤系统是一种功能强大的工具，
可用于添加、编辑和除去规则，这些规则是在做信息包过滤决定时，防火墙所遵循和组成的规则。这些规则存储在专用的信息包过滤表中，
而这些表集成在 Linux 内核中。
在信息包过滤表中，规则被分组放在我们所谓的
        <em>链（chain）</em>中。我马上会详细讨论这些规则以及如何建立这些规则并将它们分组在链中。
      </p><p>
虽然 netfilter/iptables IP 信息包过滤系统被称为单个实体，但它实际上由两个组件 
        <em>netfilter</em>和
        <em>iptables</em> 组成。
      </p><p>
netfilter 组件也称为
        <em>内核空间（kernelspace）</em>，是内核的一部分，由一些信息包过滤表组成，
这些表包含内核用来控制信息包过滤处理的规则集。
      </p><p>
iptables 组件是一种工具，也称为
        <em>用户空间（userspace）</em>，它使插入、修改和除去信息包过滤表中的规则变得容易。
除非您正在使用 Red Hat Linux 7.1 或更高版本，否则需要从 netfilter.org 下载该工具并安装使用它。
      </p><p>
通过使用用户空间，可以构建自己的定制规则，这些规则存储在内核空间的信息包过滤表中。
这些规则具有
        <em>目标</em>，它们告诉内核对来自某些源、前往某些目的地或具有某些协议类型的信息包做些什么。
如果某个信息包与规则匹配，那么使用目标 
        <code>ACCEPT</code> 允许该信息包通过。还可以使用目标 
        <code>DROP</code> 或 
        <code>REJECT</code> 来阻塞并杀死信息包。对于可对信息包执行的其它操作，还有许多其它目标。
      </p><p>
根据规则所处理的信息包的类型，可以将规则分组在链中。处理入站信息包的规则被添加到 
        <code>INPUT</code> 链中。处理出站信息包的规则被添加到 
        <code>OUTPUT</code> 链中。处理正在转发的信息包的规则被添加到 
        <code>FORWARD</code> 链中。这三个链是基本信息包过滤表中内置的缺省主链。
另外，还有其它许多可用的链的类型（如 
        <code>PREROUTING</code> 和 
        <code>POSTROUTING</code> ），
以及提供用户定义的链。每个链都可以有一个
        <em>策略</em>，
它定义“缺省目标”，也就是要执行的缺省操作，当信息包与链中的任何规则都不匹配时，执行此操作。
      </p><p>
建立规则并将链放在适当的位置之后，就可以开始进行真正的信息包过滤工作了。
这时内核空间从用户空间接管工作。当信息包到达防火墙时，内核先检查信息包的头信息，尤其是信息包的目的地。
我们将这个过程称为
        <em>路由</em>。
      </p><p>
如果信息包源自外界并前往系统，而且防火墙是打开的，那么内核将它传递到内核空间信息包过滤表的 
        <code>INPUT</code> 链。如果信息包源自系统内部或系统所连接的内部网上的其它源，并且此信息包要前往另一个外部系统，
那么信息包被传递到 
        <code>OUTPUT</code> 链。类似的，源自外部系统并前往外部系统的信息包被传递到 
        <code>FORWARD</code> 链。
      </p><p>
接下来，将信息包的头信息与它所传递到的链中的每条规则进行比较，看它是否与某条规则完全匹配。
如果信息包与某条规则匹配，那么内核就对该信息包执行由该规则的目标指定的操作。
但是，如果信息包与这条规则不匹配，那么它将与链中的下一条规则进行比较。
最后，如果信息包与链中的任何规则都不匹配，那么内核将参考该链的策略来决定如何处理该信息包。
理想的策略应该告诉内核 
        <code>DROP</code> 该信息包。
        <strong>图 1</strong> 用图形说明了这个信息包过滤过程。
      </p><h5 id="N100C5">图 1. 信息包过滤过程</h5><img alt="信息包过滤过程" src="diagram1.jpg" width="480"><div class="ibm-alternate-rule"><hr></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N100CF">安装 netfilter/iptables 系统</h2><p>因为 netfilter/iptables 的 netfilter 组件是与内核 2.4.x 集成在一起的，所以只需要下载并安装 iptables 用户空间工具。
</p><h3 id="N100D6">需求</h3><p>下面是安装 netfilter/iptables 系统的需求：
        </p><ul class="ibm-bullet-list"><li><strong>硬件：</strong>要使用 netfilter/iptables，需要有一个运行 Linux OS 并连接到因特网、LAN 或 WAN 的系统。
          </li><li><strong>软件：</strong>带有内核 2.4 或更高版本的任何版本的 Linux OS。可以从
            <a href="http://www.kernel.org/">http://www.kernel.org</a> 下载最新版本的内核。还需要从
            <a href="http://www.netfilter.org/">http://www.netfilter.org</a> 下载 iptables 这个用户空间工具，
因为这个工具不是内核的一部分。但对于 RedHat Linux 版本 7.1 或更高版本，不需要下载此工具，因为在版本 7.1 或更高版本中，
标准安装中已经包含了此工具。
          </li><li><strong>用户：</strong>至少对 Linux OS 有中等水平的了解，以及具备配置 Linux 内核的经验。
          </li></ul><h3 id="N100F2">安装前的准备</h3><p>在开始安装 iptables 用户空间工具之前，需要对系统做某些修改。首先，需要使用 
        <code>make config</code> 命令来配置内核的选项。在配置期间，必须通过将 
        <code>CONFIG_NETFILTER</code> 和 
        <code>CONFIG_IP_NF_IPTABLES</code> 选项设置为 
        <code>Y</code> 来打开它们，因为这是使 netfilter/iptables 工作所必需的。下面是可能要打开的其它选项：
        </p><ul class="ibm-bullet-list"><li><strong><code>CONFIG_PACKET</code> ：
            </strong>如果要使应用程序和程序直接使用某些网络设备，那么这个选项是有用的。
          </li><li><strong><code>CONFIG_IP_NF_MATCH_STATE</code> ：
            </strong>如果要配置
            <em>有状态的</em>防火墙，那么这个选项非常重要而且很有用。这类防火墙会记得先前关于信息包过滤所做的决定，并根据它们做出新的决定。
我将在 
            <strong>netfilter/iptables 系统的优点</strong>一节中进一步讨论这方面的问题。
          </li><li><strong><code>CONFIG_IP_NF_FILTER</code> ：
            </strong>这个选项提供一个基本的信息包过滤框架。如果打开这个选项，则会将一个基本过滤表（带有内置的 
            <code>INPUT</code> 、 
            <code>FORWARD</code> 和 
            <code>OUTPUT</code> 链）添加到内核空间。
          </li><li><strong><code>CONFIG_IP_NF_TARGET_REJECT</code> ：
            </strong>这个选项允许指定：应该发送 ICMP 错误消息来响应已被 
            <code>DROP</code> 掉的入站信息包，而不是简单地杀死它们。
          </li></ul><p>
现在，可以准备安装这个用户空间工具了。
      </p><h3 id="N10132">安装用户空间工具</h3><p>在下载 iptables 用户空间工具的源代码（它类似于 iptables-1.2.6a.tar.bz2）之后，可以开始安装。
您需要以 
        <code>root</code> 身份登录来执行安装。
        <a href="#code1">清单 1</a>
给出了一个示例，它指出了安装该工具所需的命令、其必要的次序及其说明。
      </p><a id="code1"></a><p><strong>清单 1. 用户空间工具安装的示例</strong></p><div class="codesection"><pre class="displaycode">First, unpack the tool package into a directory:
# bzip2 -d iptables-1.2.6a.tar.bz2
# tar -xvf  iptables-1.2.6a.tar
This will unpack the tool source into a directory named iptables-1.2.6a. 
Now change to the iptables-1.2.6a directory:
# cd iptables-1.2.6a
The INSTALL file in this directory contains a lot of useful information 
on compiling and installing this tool.
Now compile the userspace tool using the following command:
# make KERNEL_DIR=/usr/src/linux/
Here the KERNEL_DIR=/usr/src/linux/ specifies the path to the kernel's 
directory. If the directory of kernel happens to be different on some 
systems, the appropriate directory path should be substituted for 
/usr/src/linux.
Now install the source binaries using the following command:
# make install KERNEL_DIR=/usr/src/linux/
Now the installation is complete.</pre></div><p><strong>注：</strong>如果您有 RedHat Linux 版本 7.1 或更高版本，就不需要执行这里说明的前两个步骤。
正如我们所知道的，该 Linux 分发版（distribution）的标准安装中包含了 iptables 用户空间工具。
但在缺省情况下，这个工具是关闭的。为了使该工具运行，需要执行以下步骤（
        <a href="#code2">清单 2</a>）：
      </p><a id="code2"></a><p><strong>清单 2. 在 RedHat 7.1 系统上设置用户空间工具的示例</strong></p><div class="codesection"><pre class="displaycode">First you'll have to turn off the old ipchains module (predecessor of 
iptables) available in this OS package.
This can be done using the following command:
# chkconfig --level 0123456 ipchains off
Next, to completely stop the ipchains module from running, so that it 
doesn't conflict with the iptables tool, you will have to stop the ipchains 
service using the following command:
# service ipchains stop
Now if you don't want to keep this old ipchains module on your system, 
uninstall it using the following command:
# rpm -e ipchains
Now you can turn on the iptables userspace tool with the following command:
# chkconfig --level 235 iptables on
Finally, you'll have to activate the iptables service to make the userspace 
tool work by using this command:
# service iptables start
Now the userspace tool is ready to work on a RedHat 7.1 or higher system.</pre></div><p>现在，一切都已妥当，并且 netfilter/iptables 系统应该正在运行，接下来，需要建立一些规则和链来过滤信息包。</p><div class="ibm-alternate-rule"><hr></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N10160">建立规则和链</h2><p>通过向防火墙提供有关对来自某个源、到某个目的地或具有特定协议类型的信息包要做些什么的指令，规则控制信息包的过滤。
通过使用 netfilter/iptables 系统提供的特殊命令 
        <code>iptables</code> ，建立这些规则，并将其添加到内核空间的特定信息包过滤表内的链中。关于添加／除去／编辑规则的命令的一般语法如下：
      </p><p><code>$ iptables  [-t table] command [match] [target]</code></p><h3 id="N1016D">表（table）</h3><p><code>[-t table]</code> 选项允许使用标准表之外的任何表。表是包含仅处理特定类型信息包的规则和链的信息包过滤表。
有三种可用的表选项： 
        <code>filter</code> 、 
        <code>nat</code> 和 
        <code>mangle</code> 。该选项不是必需的，如果未指定，
则 
        <code>filter</code> 用作缺省表。
      </p><p>
filter 表用于一般的信息包过滤，它包含 
        <code>INPUT</code> 、 
        <code>OUTPUT</code> 和 
        <code>FORWARD</code> 链。nat 表用于要转发的信息包，它包含 
        <code>PREROUTING</code> 、 
        <code>OUTPUT</code> 和 
        <code>POSTROUTING</code> 链。
如果信息包及其头内进行了任何更改，则使用 mangle 表。
该表包含一些规则来标记用于高级路由的信息包，该表包含 
        <code>PREROUTING</code> 和 
        <code>OUTPUT</code> 链。
      </p><p><strong>注：</strong><code>PREROUTING</code> 链由指定信息包一到达防火墙就改变它们的规则所组成，而 
        <code>POSTROUTING</code> 链由指定正当信息包打算离开防火墙时改变它们的规则所组成。
      </p><h3 id="N101A5">命令（command）</h3><p>上面这条命令中具有强制性的 command 部分是 
        <code>iptables</code> 命令的最重要部分。
它告诉 
        <code>iptables</code> 命令要做什么，例如，插入规则、将规则添加到链的末尾或删除规则。
以下是最常用的一些命令：
      </p><ul class="ibm-bullet-list"><li><strong><code>-A</code> 或 
            <code>--append</code> ：
          </strong>该命令将一条规则附加到链的末尾。
          <br>示例：
          
<p><code>$ iptables -A INPUT -s 205.168.0.1 -j ACCEPT</code></p>
该示例命令将一条规则附加到 
          <code>INPUT</code> 链的末尾，确定来自源地址 205.168.0.1 的信息包可以 
          <code>ACCEPT</code> 。
        </li><li><strong><code>-D</code> 或 
            <code>--delete</code> ：
          </strong>通过用 
          <code>-D</code> 指定要匹配的规则或者指定规则在链中的位置编号，该命令从链中删除该规则。
下面的示例显示了这两种方法。
          <br>示例：
          
<p><code>$ iptables -D INPUT --dport 80 -j DROP
              <br>
				$ iptables -D OUTPUT 3
            </code></p>
第一条命令从 
          <code>INPUT</code> 链删除规则，它指定 
          <code>DROP</code> 前往端口 80 的信息包。第二条命令只是从 
          <code>OUTPUT</code> 链删除编号为 3 的规则。
        </li><li><strong><code>-P</code> 或 
            <code>--policy</code> ：
          </strong>该命令设置链的缺省目标，即策略。
所有与链中任何规则都不匹配的信息包都将被强制使用此链的策略。
          <br>示例：
          
<p><code>$ iptables -P INPUT DROP</code></p>
该命令将 
          <code>INPUT</code> 链的缺省目标指定为 
          <code>DROP</code> 。这意味着，将丢弃所有与 
          <code>INPUT</code> 链中任何规则都不匹配的信息包。
        </li><li><strong><code>-N</code> 或 
            <code>--new-chain</code> ：
          </strong>用命令中所指定的名称创建一个新链。
          <br>示例：
          
<p><code>$ iptables -N allowed-chain</code></p></li><li><strong><code>-F</code> 或 
            <code>--flush</code> ：
          </strong>如果指定链名，该命令删除链中的所有规则，
如果未指定链名，该命令删除所有链中的所有规则。此参数用于快速清除。
          <br>示例：
          
<p><code>$ iptables -F FORWARD
              <br>
				$ iptables -F
            </code></p></li><li><strong><code>-L</code> 或 
            <code>--list</code> ：
          </strong>列出指定链中的所有规则。
          <br>示例：
          
<p><code>$ iptables -L allowed-chain</code></p></li></ul><h3 id="N10229">匹配（match）</h3><p>iptables 命令的可选 match 部分指定信息包与规则匹配所应具有的特征（如源和目的地地址、协议等）。
匹配分为两大类：
        <em>通用匹配</em>和
        <em>特定于协议的匹配</em>。这里，我将研究可用于采用任何协议的信息包的通用匹配。
下面是一些重要的且常用的通用匹配及其示例和说明：
      </p><ul class="ibm-bullet-list"><li><strong><code>-p</code> 或 
            <code>--protocol</code> ：
          </strong>该通用协议匹配用于检查某些特定协议。
协议示例有 
          <code>TCP</code> 、 
          <code>UDP</code> 、 
          <code>ICMP</code> 、用逗号分隔的任何这三种协议的组合列表以及 
          <code>ALL</code> （用于所有协议）。 
          <code>ALL</code> 是缺省匹配。可以使用 
          <code>!</code> 符号，它表示不与该项匹配。
          <br>示例：
          
<p><code>$ iptables -A INPUT -p TCP, UDP
              <br>
				$ iptables -A INPUT -p ! ICMP
            </code></p>
在上述示例中，这两条命令都执行同一任务 — 它们指定所有 
          <code>TCP</code> 和 
          <code>UDP</code> 信息包都将与该规则匹配。
通过指定 
          <code>! ICMP</code> ，我们打算允许所有其它协议（在这种情况下是 
          <code>TCP</code> 和 
          <code>UDP</code> ），
而将 
          <code>ICMP</code> 排除在外。
        </li><li><strong><code>-s</code> 或 
            <code>--source</code> ：
          </strong>该源匹配用于根据信息包的源 IP 地址来与它们匹配。该匹配还允许对某一范围内的 IP 地址进行匹配，可以使用 
          <code>!</code> 符号，表示不与该项匹配。缺省源匹配与所有 IP 地址匹配。
          <br>示例：
          
<p><code>$ iptables -A OUTPUT -s 192.168.1.1
              <br>
				$ iptables -A OUTPUT -s 192.168.0.0/24
              <br>
				$ iptables -A OUTPUT -s ! 203.16.1.89
            </code></p>
第二条命令指定该规则与所有来自 192.168.0.0 到 192.168.0.24 的 IP 地址范围的信息包匹配。第三条命令指定该规则将与
除来自源地址 203.16.1.89 外的任何信息包匹配。
        </li><li><strong><code>-d</code> 或 
            <code>--destination</code> ：
          </strong>该目的地匹配用于根据信息包的目的地 IP 地址来与它们匹配。
该匹配还允许对某一范围内 IP 地址进行匹配，可以使用 
          <code>!</code> 符号，表示不与该项匹配。
          <br>示例：
          
<p><code>$ iptables -A INPUT -d 192.168.1.1
              <br>
				$ iptables -A INPUT -d 192.168.0.0/24
              <br>
				$ iptables -A OUTPUT -d ! 203.16.1.89
            </code></p></li></ul><h3 id="N10297">目标（target）</h3><p>我们已经知道，目标是由规则指定的操作，对与那些规则匹配的信息包执行这些操作。
除了允许用户定义的目标之外，还有许多可用的目标选项。下面是常用的一些目标及其示例和说明：</p><ul class="ibm-bullet-list"><li><strong><code>ACCEPT</code> ：
          </strong>当信息包与具有 
          <code>ACCEPT</code> 目标的规则完全匹配时，
会被接受（允许它前往目的地），并且它将停止遍历链（虽然该信息包可能遍历另一个表中的其它链，并且有可能在那里被丢弃）。
该目标被指定为 
          <code>-j ACCEPT</code> 。
        </li><li><strong><code>DROP</code> ：
          </strong>当信息包与具有 
          <code>DROP</code> 目标的规则完全匹配时，会阻塞该信息包，并且不对它做进一步处理。
该目标被指定为 
          <code>-j DROP</code> 。
        </li><li><strong><code>REJECT</code> ：
          </strong>该目标的工作方式与 
          <code>DROP</code> 目标相同，但它比 
          <code>DROP</code> 好。和 
          <code>DROP</code> 不同， 
          <code>REJECT</code> 不会在服务器和客户机上留下死套接字。
另外， 
          <code>REJECT</code> 将错误消息发回给信息包的发送方。该目标被指定为 
          <code>-j REJECT</code> 。
          <br>示例：
          
<p><code>$ iptables -A FORWARD -p TCP --dport 22 -j REJECT</code></p></li><li><strong><code>RETURN</code> ：
          </strong>在规则中设置的 
          <code>RETURN</code> 目标让与该规则匹配的信息包停止遍历包含该规则的链。
如果链是如 
          <code>INPUT</code> 之类的主链，则使用该链的缺省策略处理信息包。
它被指定为 
          <code>-jump RETURN</code> 。示例：
          
<p><code>$ iptables -A FORWARD -d 203.16.1.89 -jump RETURN</code></p></li></ul><p>还有许多用于建立高级规则的其它目标，如 
        <code>LOG</code> 、 
        <code>REDIRECT</code> 、 
        <code>MARK</code> 、 
        <code>MIRROR</code> 
和 
        <code>MASQUERADE</code> 等。
      </p><h3 id="N102F7">保存规则</h3><p>现在，您已经学习了如何建立基本的规则和链以及如何从信息包过滤表中添加或删除它们。
但是，您应该记住：用上述方法所建立的规则会被保存到内核中，当重新引导系统时，会丢失这些规则。
所以，如果您将没有错误的且有效的规则集添加到信息包过滤表，同时希望在重新引导之后再次使用这些规则，
那么必须将该规则集保存在文件中。可以使用 
        <strong>iptables-save</strong>命令来做到这一点：
      </p><p><code>$ iptables-save &gt; iptables-script</code></p><p>现在，信息包过滤表中的所有规则都被保存在文件 iptables-script 中。无论何时再次引导系统，
都可以使用 
        <strong>iptables-restore</strong>命令将规则集从该脚本文件恢复到信息包过滤表，如下所示：
      </p><p><code>$ iptables-restore iptables-script</code></p><p>如果您愿意在每次引导系统时自动恢复该规则集，则可以将上面指定的这条命令放到任何一个初始化 shell 脚本中。</p><div class="ibm-alternate-rule"><hr></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N1030E">netfilter/iptables 系统的优点</h2><p>netfilter/iptables 的最大优点是它可以配置有状态的防火墙，这是 ipfwadm 和 ipchains 等以前的工具都无法提供的一种重要功能。有状态的防火墙能够指定并记住为发送或接收信息包所建立的连接的状态。防火墙可以从信息包的连接跟踪状态获得该信息。
在决定新的信息包过滤时，防火墙所使用的这些状态信息可以增加其效率和速度。
这里有四种有效状态，名称分别为 
        <code>ESTABLISHED</code> 、 
        <code>INVALID</code> 、 
        <code>NEW</code> 和 
        <code>RELATED</code> 。
      </p><p>状态 
        <code>ESTABLISHED</code> 指出该信息包属于已建立的连接，该连接一直用于发送和接收信息包并且完全有效。 
        <code>INVALID</code> 
状态指出该信息包与任何已知的流或连接都不相关联，它可能包含错误的数据或头。
状态 
        <code>NEW</code> 意味着该信息包已经或将启动新的连接，或者它与尚未用于发送和接收信息包的连接相关联。
最后， 
        <code>RELATED</code> 表示该信息包正在启动新连接，以及它与已建立的连接相关联。
      </p><p>netfilter/iptables 的另一个重要优点是，它使用户可以完全控制防火墙配置和信息包过滤。
您可以定制自己的规则来满足您的特定需求，从而只允许您想要的网络流量进入系统。</p><p>另外，netfilter/iptables 是免费的，这对于那些想要节省费用的人来说十分理想，它可以代替昂贵的防火墙解决方案。</p><div class="ibm-alternate-rule"><hr></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N10333">结束语</h2><p>最新的 Linux 内核 2.4.x 具有 netfilter/iptables 系统这种内置的 IP 信息包过滤工具，它使配置防火墙和信息包过滤变得便宜且方便。netfilter/iptables 系统使其用户可以完全控制防火墙配置和信息包过滤。
它允许为防火墙建立可定制化的规则来控制信息包过滤。它还允许配置有状态的防火墙。</p><!--CMA ID: true--><!--Site ID: 10--><!--XSLT stylesheet used to transform this file: dw-document-html-7.0.xsl-->


</div>
</div>
<!-- 1_1_COLUMN_END -->

<!-- SPLIT_COLUMNS_BEGIN -->
<div class="ibm-columns">

<!-- 6_4_COLUMN_BEGIN -->
<div class="ibm-col-6-4">

<h2 id="resources" class="ibm-rule">参考资料 </h2><ul class="ibm-bullet-list"><li>您可以参阅本文在 developerWorks 全球站点上的
          <a href="http://www.ibm.com/developerworks/library/s-netip/index.html?S_TACT=105AGX52&amp;S_CMP=cn-a-l">英文原文</a>.
        </li><li>从
          <a href="http://www.netfilter.org/">Netfilter 网站</a>获取有关 netfilter/iptables 系统的最新信息并下载
iptables 用户空间工具。
        </li><li>请访问
          <a href="http://www.netfilter.org/documentation/HOWTO/packet-filtering-HOWTO.html">Linux 2.4 Packet Filtering HOWTO Web 页面</a>，以获取关于 netfilter/iptables 的快速参考。
        </li><li>请参考这篇
          <a href="http://www.jollycom.ca/iptables-tutorial/iptables-tutorial.html">有关 netfilter/iptables 的详细教程</a>（Iptables Tutorial 1.1.9）。
        </li><li>请从
          <a href="http://www.netfilter.org/documentation/FAQ/netfilter-faq.html">netfilter/iptables FAQ</a>
获取任何有关 netfilter/iptables 问题的答案。
        </li></ul>

<!-- INLINE_COMMENTS_BEGIN -->
<h2 id="icomments" class="ibm-alternate-rule ibm-no-print">条评论</h2>
    
<div class="ibm-no-print" id="dw-icomments-container">	
	<div id="threadShow"><img style="display: none;" id="imgPlHdr" src="animated-progress-38x38c.gif" alt=""><div id="cmtTog" style=""><div class="ibm-container ibm-alternate-two dw-commentbox dw-noborder"><div class="ibm-container-body dw-commentbox dw-noborder"><p id="signInSect">请 <a href="#">登录</a> 或 <a href="http://www.ibm.com/developerworks/dwwi/jsp/ssoregister.jsp?d=http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Flinux%2Fnetwork%2Fs-netip%2F%23icomments&amp;lang=cn&amp;a=dwmav">注册</a>  后发表评论。</p><p id="cmtHead"><label for="newCmt"><strong>添加评论:</strong></label></p><p>注意：评论中不支持 HTML 语法</p><div id="infoCmt"></div><form focus="name" enctype="multipart/form-data" method="post" action="" name="form" class="ibm-column-form ibm-styled-form"><p class="6-4-textarea"><textarea rows="5" name="newCmt" id="newCmt" class="dw-inoperable" disabled=""></textarea><br></p><span class="ibm-input-group"><input value="1" name="comment_notification" id="comment_notification" disabled="disabled" type="checkbox"><label id="notifyText" class="ibm-form-note dw-btn-cancel-sec" for="comment_notification">有新评论时提醒我</label></span><span class="ibm-form-note dw-btn-cancel-sec notifySection" id="maxCharsCount">剩余 <span id="charCount">1000</span> 字符</span><p class="ibm-buttons-row"><input value="发布" name="postCmt" id="postCmt" class="ibm-btn-sec ibm-btn-small ibm-disabled" disabled="disabled" type="button"></p></form></div></div><div class="ibm-alternate-rule"><hr></div><div id="topControl" class="ibm-container ibm-alternate-two dw-comment-totals" style=""><div class="ibm-container-body"><form id="selectComments" method="get" action=""><p>&nbsp;<span class="dw-comment-totals-label"><strong>共有评论 (<span id="numCmts">1</span>)</strong></span><span class="dw-how-many-comments-label" style="display: none;" id="dropdownCmts"><label for="howManyComments"><strong>显示：</strong></label>&nbsp;<select name="comments" id="howManyComments" class="dw-how-many-comments"><option selected="selected" value="recent">最新评论 </option></select><input class="ibm-btn-go" name="ibm-go" value="Go" src="short-btn.gif" alt="Go" type="image"><br></span></p></form></div></div><div id="cmtSect"><div class="comment"><div class="dw-icomment-container"><div class="dw-icomment-body dw-noborder"><div class="dw-icomment-body dw-noborder"><p>关于-s选项中的"第二条命令指定该规则与所有来自 192.168.0.0 到 192.168.0.24 的 IP 地址范围的信息包匹配。"应该描述为\u201C第二条命令指定该规则与所有来自 192.168.0.0 到 192.168.0.255 的 IP 地址范围的信息包匹配。\u201D吧</p><p class="ibm-item-note-alternate dw-item-note-alternate-left">由 <strong><a href="https://www.ibm.com/developerworks/community/profiles/user/wudiwen">wudiwen</a></strong>  于 2012年02月29日发布 </p><p class="ibm-ind-link ibm-item-note-alternate dw-item-note-alternate-right"><a class="ibm-caution-link dw-report-abuse" href="http://www.ibm.com/developerworks/community/report?lang=zh&amp;referingURL=http://www.ibm.com/developerworks/cn/linux/network/s-netip/&amp;mymessage=%E8%AF%84%E8%AE%BA%EF%BC%9A%20%E5%85%B3%E4%BA%8E-s%E9%80%89%E9%A1%B9%E4%B8%AD%E7%9A%84%22%E7%AC%AC%E4%BA%8C%E6%9D%A1%E5%91%BD%E4%BB%A4%E6%8C%87%E5%AE%9A%E8%AF%A5%E8%A7%84%E5%88%99%E4%B8%8E%E6%89%80%E6%9C%89%E6%9D%A5%E8%87%AA%20192.168.0.0%20%E5%88%B0%20192.168.0.24%20%E7%9A%84%20IP%20%E5%9C%B0%E5%9D%80%E8%8C%83%E5%9B%B4%E7%9A%84%E4%BF%A1%E6%81%AF%E5%8C%85%E5%8C%B9%E9%85%8D%E3%80%82%22%E5%BA%94%E8%AF%A5%E6%8F%8F%E8%BF%B0%E4%B8%BA%5Cu201C%E7%AC%AC%E4%BA%8C%E6%9D%A1%E5%91%BD%E4%BB%A4%E6%8C%87%E5%AE%9A%E8%AF%A5%E8%A7%84%E5%88%99%E4%B8%8E%E6%89%80%E6%9C%89%E6%9D%A5%E8%87%AA%20192.168.0.0%20%E5%88%B0%20192.168.0.255%20%E7%9A%84%20IP%20%E5%9C%B0%E5%9D%80%E8%8C%83%E5%9B%B4%E7%9A%84%E4%BF%A1%E6%81%AF%E5%8C%85%E5%8C%B9%E9%85%8D%E3%80%82%5Cu201D%E5%90%A7%0D%E7%94%B1%20wudiwen%20%20%E4%BA%8E%202012%E5%B9%B402%E6%9C%8829%E6%97%A5%E5%8F%91%E5%B8%83%20%0D%0D--%E5%9C%A8%E4%B8%8B%E6%96%B9%E6%B7%BB%E5%8A%A0%E8%AF%84%E8%AE%BA--" target="_self">报告滥用</a></p><div class="dw-clear-both"></div></div></div></div></div></div></div><div id="bottomControl" class="ibm-container ibm-alternate-two dw-comment-totals" style="display: none;"><div class="ibm-container-body"><form id="selectComments2" method="get" action=""><p>&nbsp;<span class="dw-comment-totals-label"><strong>共有评论 (<span id="numCmts2">1</span>)</strong></span><span class="dw-how-many-comments-label" style="display: none;" id="dropdownCmts2"><label for="howManyComments2"><strong>显示：</strong></label>&nbsp;<select name="comments" id="howManyComments2" class="dw-how-many-comments"><option selected="selected" value="recent">最新评论 </option></select><input class="ibm-btn-go" name="ibm-go" value="Go" src="short-btn.gif" alt="Go" type="image"><br></span></p></form></div></div></div>
</div>
<!-- Sign in OVERLAY STARTS HERE -->
    
<!-- Sign in OVERLAY STARTS HERE -->
<div class="ibm-common-overlay" id="signin_overlay">
<div class="ibm-head">
<p><a class="ibm-common-overlay-close" href="#">关闭 [x]</a></p>
</div>
<div class="ibm-body">
<div class="ibm-main">

 <div class="ibm-title">
<h2>developerWorks: 登录</h2>
<div id="ibm-overlay-error-signin" class="no-display"></div>
</div>
<div class="ibm-container ibm-alternate ibm-buttons-last">
<div class="ibm-container-body">
<p class="ibm-overlay-intro">标有星（<span class="ibm-required">*</span>）号的字段是必填字段。</p> 
<form class="ibm-column-form" id="sFormId" action="" method="post" name="sForm">
<p><label for="ibmid">IBM ID:<span class="ibm-required">*</span></label><span>
    <input style="background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAAAXNSR0IArs4c6QAAAVVJREFUOBGlUr9LhWAUvf5AZ6eWGt2CDEFEGjMI+id6Q9DY2xoEdWmqKYIe9Cc0NbZFQ1NIq0vx3CycDdTOpXh8+j1s8IMj5xzvvd77eYkmnDiO79UJ+Zy6oaPKAcgl8A4cQ38CAfg18PXnFWma7rRtu4D+1jRtFkVRDk7cwV3XddvAEficTZwb6F1gHzxiA8lX0B6w1zTNBXt8po5AqqIoM+ANeDAMg0chVVVPoV+BR13XU/ZwzqBfgCeMcP5rTXzirp6VYY0kSQ4x5y2wNXwnanSyRMyHLprMYS6AzaE/1PwBFFGkS1yXbNs2eZ5Hpmn26nCs1IEYgQ9QGIYUBLwWRHmeU13XYsj4b3Qch3zfp6qqekmiGO0gyzIqy5Jc1yXLssS8FZfuYPUGBDNSURSiJfHRAlL0GmNyAWmRsF28IP/uATeDv1RIHcA8AZZruu1ZHMOxP66qe9DAZLEcAAAAAElFTkSuQmCC&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;" aria-required="true" name="ibm-id" id="ibmid" size="25" value="" class="required" type="text">
    <br><a href="#" class="ibm-forward-link">需要一个 IBM ID？</a> <br>
    <a class="ibm-forward-link" href="http://www.ibm.com/developerworks/dwwi/jsp/WSHelp.jsp?lang=zh_CN">忘记 IBM ID？</a> 
</span>
</p> 
<p><label for="password">密码：<span class="ibm-required">*</span></label><span>
    <input style="background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAAAXNSR0IArs4c6QAAAVVJREFUOBGlUr9LhWAUvf5AZ6eWGt2CDEFEGjMI+id6Q9DY2xoEdWmqKYIe9Cc0NbZFQ1NIq0vx3CycDdTOpXh8+j1s8IMj5xzvvd77eYkmnDiO79UJ+Zy6oaPKAcgl8A4cQ38CAfg18PXnFWma7rRtu4D+1jRtFkVRDk7cwV3XddvAEficTZwb6F1gHzxiA8lX0B6w1zTNBXt8po5AqqIoM+ANeDAMg0chVVVPoV+BR13XU/ZwzqBfgCeMcP5rTXzirp6VYY0kSQ4x5y2wNXwnanSyRMyHLprMYS6AzaE/1PwBFFGkS1yXbNs2eZ5Hpmn26nCs1IEYgQ9QGIYUBLwWRHmeU13XYsj4b3Qch3zfp6qqekmiGO0gyzIqy5Jc1yXLssS8FZfuYPUGBDNSURSiJfHRAlL0GmNyAWmRsF28IP/uATeDv1RIHcA8AZZruu1ZHMOxP66qe9DAZLEcAAAAAElFTkSuQmCC&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;" name="password" id="password" size="25" value="" class="required" type="password">
    <br><a class="ibm-forward-link" href="#">忘记密码？</a>
    <br><a class="ibm-forward-link" href="#">更改您的密码</a></span></p> 
<p class="dw-perm-box">
	<span><input id="perm" name="perm_name" type="checkbox"><label for="perm"> 保持登录。</label></span>
</p>
<p>单击提交则表示您同意developerWorks 的条款和条件。 <a href="http://www.ibm.com/developerworks/community/terms?lang=zh">查看条款和条件</a>。</p>
<div class="ibm-buttons-row">
   <p><input class="ibm-btn-arrow-pri" name="ibm-submit" value="提交" type="submit"><span class="ibm-sep">&nbsp;</span>
<input value="取消" name="ibm-cancel" class="ibm-btn-cancel-sec" type="button"></p>
</div>
</form>
 <div class="ibm-overlay-rule"><hr></div> 

<p>在您首次登录 developerWorks 时，会为您创建一份个人概要。<strong>您的个人概要中的信息（您的姓名、国家/地区，以及公司名称）是公开显示的，而且会随着您发布的任何内容一起显示，除非您选择隐藏您的公司名称。</strong>您可以随时更新您的 IBM 帐户。</p>
<div><p class="dw-c-overlay-secure">所有提交的信息确保安全。</p></div>
</div>
</div>
</div>
</div>
<div class="ibm-footer"></div>
</div>
<!-- Display name OVERLAY STARTS HERE -->
<div class="ibm-common-overlay" id="displayname_overlay">
<div class="ibm-head">
<p><a class="ibm-common-overlay-close" href="#">关闭 [x]</a></p>
</div>
<div class="ibm-body">
<div class="ibm-main">
<div class="ibm-title">
<h2>选择您的昵称</h2><br><br>
<div id="ibm-overlay-error-dname" class="no-display"></div>
</div>
<div class="ibm-container ibm-alternate ibm-buttons-last">
<div class="ibm-container-body">
<p class="ibm-overlay-intro">当您初次登录到 developerWorks 时，将会为您创建一份概要信息，您需要指定一个昵称。您的昵称将和您在 developerWorks 发布的内容显示在一起。</p><p><strong>昵称长度在 3 至 31 个字符之间</strong>。 
    您的昵称在 developerWorks 社区中必须是唯一的，并且出于隐私保护的原因，不能是您的电子邮件地址。</p>
<p class="ibm-overlay-intro">标有星（<span class="ibm-required">*</span>）号的字段是必填字段。</p> 
<form id="dFormId" method="post" action="" name="dForm" class="ibm-column-form">
<p><label for="displayname">昵称：<span class="ibm-required">*</span></label><span>
    <input aria-required="true" name="displayname" id="displayname" size="25" value="" type="text"></span>
    <span class="ibm-form-note">(昵称长度在 3 至 31 个字符之间)</span>
</p>
<p>单击<strong>提交</strong>则表示您同意developerWorks 的条款和条件。 <a href="http://www.ibm.com/developerworks/community/terms?lang=zh">查看条款和条件</a>.</p>
<div class="ibm-buttons-row">
   <p><input class="ibm-btn-arrow-pri" name="ibm-submit" value="提交" type="submit"><span class="ibm-sep">&nbsp;</span>
<input value="取消" name="ibm-cancel" class="ibm-btn-cancel-sec" type="button"></p>
</div>
</form>
<div class="ibm-overlay-rule"><hr></div>
<div><p class="dw-c-overlay-secure">所有提交的信息确保安全。</p></div>
</div>
</div>
</div>
</div>
<div class="ibm-footer"></div>
</div>


<!-- INLINE_COMMENTS_END -->

</div>
<!-- 6_4_COLUMN_END -->

<!-- 6_2_COLUMN_BEGIN -->
<div class="ibm-col-6-2">

<!-- Next_Steps -->
<!-- Dig_Deeper -->


<!-- Promotion_Module -->
    
<!-- PROMOTION_MODULE_START -->
<div class="ibm-alternate-rule"><hr></div>
<ul class="ibm-portrait-module-list">
<li><a role="presentation" tabindex="-1" class="" href="http://www.ibm.com/developerworks/cn/cloud/bluemix/"><img src="sm-f-bluemixrobot60.png" alt="IBM Bluemix 资源中心" width="60" height="60"></a>
<h3><a class="ibm-feature-link" href="http://www.ibm.com/developerworks/cn/cloud/bluemix/">IBM Bluemix 资源中心</a></h3>
<p>文章、教程、演示，帮助您构建、部署和管理云应用。</p></li>
<li><a role="presentation" tabindex="-1" class="" href="http://www.ibm.com/developerworks/cn/community/"><img src="sm-f-comcommunity60.png" alt="developerWorks 中文社区" width="60" height="60"></a>
<h3><a class="ibm-feature-link" href="http://www.ibm.com/developerworks/cn/community/">developerWorks 中文社区</a></h3>
<p>立即加入来自 IBM 的专业 IT 社交网络。</p></li>
<li><a role="presentation" tabindex="-1" class="" href="http://bluemixathon.devpost.com/"><img src="sm-f-bluemixathon60.png" alt="Bluemixathon 挑战赛" width="60" height="60"></a>
<h3><a class="ibm-feature-link" href="http://bluemixathon.devpost.com/">Bluemixathon 挑战赛</a></h3>
<p>为灾难恢复构建应用，赢取现金大奖。</p></li>
</ul>
<!-- PROMOTION_MODULE_END -->
</div>
<!-- 6_2_COLUMN_END -->

</div>
<!-- SPLIT_COLUMNS_END -->

<!-- BOTTOM_BACK_TO_TOP -->
<div class="ibm-columns">
<div class="ibm-col-1-1">
	<div class="ibm-alternate-rule"><hr></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p>
</div>
</div>

<!-- Rating_Meta_BEGIN -->
<!--Rating_Meta_BEGIN--><div class="metavalue">static.content.url=http://www.ibm.com/developerworks/js/artrating/</div><div class="metavalue">SITE_ID=10</div><div class="metavalue">Zone=Linux</div><div class="metavalue">ArticleID=21710</div><div class="metavalue">ArticleTitle=netfilter/iptables 简介</div><div class="metavalue">publish-date=09112002</div><div class="metavalue">url=http://www.ibm.com/developerworks/cn/linux/network/s-netip/</div><!--Rating_Meta_END-->
<!-- Rating_Meta_END -->

</div>
<!-- END_IBM_CONTENT_MAIN -->

</div>
<!-- END_IBM_CONTENT_BODY -->

</div>
<!-- END_IBM_CONTENT -->

</div></div>
<!-- LEADSPACE_END -->


<!-- END_IBM_PCON -->
<!-- FOOTER_BEGIN -->
<div aria-label="页脚" id="ibm-footer"><!-- IBM footer container; disabled --></div>

<div id="ibm-footer-module-dwwrapper" role="contentinfo" aria-label="developerWorks Footer">

<div id="ibm-footer-module-dw">
	<div class="dw-footer-columns">
		<div class="dw-footer-col-6-1 dw-footer-col-6-1-cn">
			<ul>
				<li><a href="https://www.ibm.com/developerworks/secure/feedback.jsp?domain=dwchina" tabindex="0">帮助</a></li>
				<li><a href="http://www.ibm.com/developerworks/cn/author/" tabindex="0">联系编辑</a></li>
				<li><a href="https://www.ibm.com/developerworks/secure/myideas2.jsp?domain=dwchina" tabindex="0">提交内容</a></li>
				<li><a href="http://www.ibm.com/developerworks/cn/rss/" tabindex="0">订阅源</a></li>
			</ul>
        </div>
		<div class="dw-footer-col-6-2">
			<ul>
				<li><a class="dwcn-sina-link" href="http://weibo.com/ibmdw/" target="_blank" tabindex="0">新浪微博</a></li>
				<li><a href="https://www.ibm.com/developerworks/community/report?lang=zh" tabindex="0">报告滥用</a></li>
				<li><a href="https://www.ibm.com/developerworks/community/terms?lang=zh" tabindex="0">使用条款</a></li>
				<li><a href="https://www.ibm.com/developerworks/cn/community/terms/thirdparty/" tabindex="0">第三方提示</a></li>
			</ul>
		</div>
		<div class="dw-footer-col-6-3">
			<ul>
				<li><a href="http://www.ibm.com/privacy/cn/zh/" tabindex="0">隐私条约</a></li>
				<li><a href="http://www.ibm.com/ibm/accessibility/cn/" tabindex="0">浏览辅助</a></li>
				<li><a href="http://www.ibm.com/developerworks/cn/academic/" tabindex="0">IBM 教育学院教育培养计划</a></li><li><a href="http://www.ibm.com/developerworks/cn/gep/">IBM 创业企业全球扶持计划</a></li><li><a href="http://www.ibm.com/partnerworld/isv/">ISV 资源 (英语)</a></li>
			</ul>
		</div>
		<div class="dw-footer-col-6-4"> 
			<ul>
				<li><a href="http://www.ibm.com/developerworks/cn/newsletter/" tabindex="0">dW 中国每周时事通讯</a></li>
			</ul>
			
		</div>
		<div class="dw-footer-col-6-5">
			<ul>
				<li class="dw-footer-lang-head">选择语言：</li>
				<li><a href="http://www.ibm.com/developerworks/" tabindex="0">English</a></li>
				<li><a href="http://www.ibm.com/developerworks/cn/" tabindex="0" lang="zh">中文</a></li>
				<li><a href="http://www.ibm.com/developerworks/jp/" tabindex="0" lang="ja">日本語</a></li>
				<li><a href="http://www.ibm.com/developerworks/ru/" tabindex="0" lang="ru">Русский</a></li>
				<li><a href="http://www.ibm.com/developerworks/br/" tabindex="0" lang="pt">Português (Brasil)</a></li>
				<li><a href="http://www.ibm.com/developerworks/ssa/" tabindex="0" lang="es">Español</a></li>
				<li><a href="http://www.ibm.com/developerworks/vn/" tabindex="0" lang="vi">Việt</a></li>
			</ul>
		</div>
		<div class="dw-footer-col-6-6">
			<img alt="IBM®" src="dwn-ibm-logo-v17.png" width="223" height="46">
			<img class="dw-preload" src="ibm_sprite_social_blue_ON.png" alt="" width="1" height="1">
		</div>
	</div>
</div>

</div><!-- FOOTER_END -->

<!-- END_IBM-TOP -->
</div>

<!-- SCRIPTS_INCLUDE_BEGIN -->





<!-- SCRIPTS_INCLUDE_END -->

<div id="ibm-metrics">

</div>



<div id="ads"></div></body>
</html>
