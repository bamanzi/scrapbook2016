<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>在 Android 系统上安装 Debian Linux 与 R （更新 RStudio Server 安装） · LinuxTOY</title>
        
        <!--[if lte IE 8]>
        <link rel="stylesheet" href="https://linuxtoy.org/theme/css/grids-responsive-old-ie-min.css">
        <link rel="stylesheet" href="https://linuxtoy.org/theme/css/side-menu-old-ie.css">
        <![endif]-->
        <!--[if gt IE 8]><!-->
        
        
        <!--<![endif]-->
        
        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
        <link rel="alternate" type="application/atom+xml" href="https://linuxtoy.org/feeds/all.atom.xml" title="LinuxTOY Atom Feed">
        <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        
        
        <meta name="keywords" content="Linux, 自由软件, 新闻, 教程，提示">
        <meta name="description" content="要说最近为啥没更新，原因很多，不过真相只有一个：在折腾新购入的平板。这里就描述下如何在 Android 平板上安装原生 Linux 系统以及用于统计及和机器学习的 R 语言环境。">
        <meta name="subject" content="Linux 新闻、应用及提示">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@linuxtoy">
        <meta name="twitter:creator" content="@linuxtoy">
        <meta name="twitter:url" content="https://linuxtoy.org/archives/install-debian-and-r-on-android.html">
        <meta name="twitter:title" content="在 Android 系统上安装 Debian Linux 与 R （更新 RStudio Server 安装）">
        <meta name="twitter:description" content="要说最近为啥没更新，原因很多，不过真相只有一个：在折腾新购入的平板。这里就描述下如何在 Android 平板上安装原生 Linux 系统以及用于统计及和机器学习的 R 语言环境。">
        <meta name="twitter:image" content="https://linuxtoy.org/logo.png">
        <meta property="og:url" content="https://linuxtoy.org/archives/install-debian-and-r-on-android.html">
        <meta property="og:type" content="website">
        <meta property="og:title" content="在 Android 系统上安装 Debian Linux 与 R （更新 RStudio Server 安装）">
        <meta property="og:image" content="https://linuxtoy.org/logo.png">
        <meta property="og:description" content="要说最近为啥没更新，原因很多，不过真相只有一个：在折腾新购入的平板。这里就描述下如何在 Android 平板上安装原生 Linux 系统以及用于统计及和机器学习的 R 语言环境。">
        <meta property="og:site_name" content="LinuxTOY">
        <meta property="article:author" content="lovenemesis">
        <link rel="canonical" href="https://linuxtoy.org/archives/install-debian-and-r-on-android.html">
    
<link rel="stylesheet" type="text/css" href="index.css" media="all">
</head>
    <body>
        <div id="layout" class="pure-g">
            <div class="sidebar pure-u-1">
                <div class="header">
                    <a id="menuLink" class="menu-link" href="#menu"><span></span></a>
                    <div id="menu" class="pure-menu">
                        <a class="pure-menu-heading" href="https://linuxtoy.org/" title="LinuxTOY">LinuxTOY</a>
                        <ul class="pure-menu-list">

                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/all-archives.html" title="Archives">Archives</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/books.html" title="Books">Books</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/talks.html" title="Talks">Talks</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/download.html" title="Download">Download</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/faq.html" title="FAQs">FAQs</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/contact.html" title="Contact">Contact</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/donate.html" title="Donate">Donate</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/license.html" title="License">License</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/links.html" title="Links">Links</a>
                            </li>

                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/pages/comments.html" title="Comments">Comments</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/random.html" title="Random">Random</a>
                            </li>
                            <li class="pure-menu-item">
                                <a class="pure-menu-link" href="https://linuxtoy.org/feeds/all.atom.xml" title="RSS">RSS</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

<div class="content pure-u-1 pure-u-md-3-5">
    <div class="posts">
        <section class="post">
            <header class="post-header">
                <h2 class="post-title">
                    <a href="#" rel="bookmark" title="Permalink to 在 Android 系统上安装 Debian Linux 与 R （更新 RStudio Server 安装）">在 Android 系统上安装 Debian Linux 与 R （更新 RStudio Server 安装）</a>
                </h2>
                <p class="post-meta">
                    2015-08-04
                    · By
                    <a href="https://linuxtoy.org/author/lovenemesis.html">黑日白月</a>
                    · Posted in <a href="https://linuxtoy.org/category/tutorial.html">Tutorial</a>
                    · <a href="#disqus_thread">0 Comments</a>
                </p>
            </header>
            <div class="post-description">
            <p>其实在 Android 平板上通过第三方软件，已经可以提供很多类似一般桌面 Linux 系统的工具了。常用的 <a href="https://play.google.com/store/apps/details?id=org.mozilla.firefox&amp;hl=en">Firefox</a>、<a href="https://play.google.com/store/apps/details?id=org.videolan.vlc&amp;hl=en">VLC</a>、 <a href="https://play.google.com/store/apps/details?id=org.documentfoundation.libreoffice&amp;hl=en">LibreOffice</a> 以及<a href="https://play.google.com/store/apps/details?id=jackpal.androidterm&amp;hl=en">终端模拟器</a>都有 Android 版本，结合 Busybox 也能拥有大部分 coreutils 工具，甚至还有诸如 <a href="https://play.google.com/store/apps/details?id=com.spartacusrex.spartacuside&amp;hl=en">Terminal IDE</a>这种一站式的开发工具方案（不过不支持 Android 5.0+）。若是想要接近桌面级别的体验的话，比如像在下希望使用的 R 语言环境，还是安装一个完整的 Linux 环境比较好。</p>
<p>在 Android 手机或平板上，若是 Unlock Bootloader 且获取了 root 权限，那么多种的方法可以将亦或完整亦或深度定制各种的 Linux 环境安装上去，网上教程也有不少，不再赘述。本文描述的方法则具有如下特点：</p>
<ol>
<li><strong>无需 root</strong>，无需修改系统分区或者 Bootloader；</li>
<li>安装的是正常的 Debian Linux ARM 版本，可从官方仓库获得更新，兼容第三方 backport 仓库；</li>
<li>允许<strong>多个 Linux 发行版共存</strong>，非常方便的删除或重建，无需担心在系统或者 SD 卡上有异样残留；</li>
<li>像普通 Android 应用一样运行 Linux 系统，可与其他 Android 应用之间自由切换；</li>
<li>Linux 系统服从 Android 系统的电源管理策略（读作：省电）。 </li>
</ol>
<p>首先请出主角 <a href="https://play.google.com/store/apps/details?id=champion.gnuroot&amp;hl=en">GNURoot</a> 及 <a href="https://play.google.com/store/apps/details?id=champion.gnuroot.wheezy&amp;hl=en">GNURoot Wheezy</a>。前者在应用程序级别提供一个虚拟根文件系统，允许在其上运行为其微调的桌面 Linux 发行版；后者则显而易见的是为其打造的 Debian Wheezy 版本。</p>
<p>GNURoot 本身支持多个不同的 Linux 发行版，在下常用的 Fedora 亦在其中。不过由于打包的是古老亦不再维护的 Fedora 17，实在是不推荐使用。至于那个 Debian WheezyX 版本，稍候说明。</p>
<p>GNURoot 的使用方法相当直观。第一步选择要创建的根文件系统，若是没有安装上面提到的 Wheezy 的话，在选择后跳转到 Play Store 提示安装。稍事片刻创建完成后，就可以在第二步选择启动了，记得勾上 "Launch As Fake Root" 的选项。第三个选项则是删除根文件系统，点击后选中的根文件系统就会干净的删除，估计您不会想现在就点击它吧…</p>
<p>不过在点击启动之前，最好确认下您已经准备好了合适的输入设备，因为即将迎接您的仅仅是一个终端模拟器，而安装 R 的操作需要有不少终端的操作。若是有蓝牙键盘最好，没有的话推荐使用这款名为 <a href="https://play.google.com/store/apps/details?id=org.pocketworkstation.pckeyboard&amp;hl=en">Hacker's Keyboard</a> 的虚拟键盘，可以提供很多终端下常用的按键。</p>
<p>Debian Wheezy 这个根文件系统生成时间稍早，所以当然一上来是通过 <code>apt-get</code> 升级到最新版本了。除此之外，诸如 <code>less</code>、<code>vim</code> 之类的工具也还是装上才感觉完整了。有几点需要注意的：</p>
<ol>
<li>默认登录即是 root 账户；</li>
<li>主机的内置存储和 SD 记忆卡等设备被挂载到 <code>/storage</code> 下；</li>
<li>由于 Android 系统权限限定，仅能写入内置存储，不能写入外置 SD 卡；</li>
<li>包括 GNURoot 及 GNURoot Wheezy 在内的程序都无法移动到 SD 卡，因为 SD 卡上没有可执行权限的概念。</li>
</ol>
<p>由于 Debian 针对 Stable 的管理策略，要想用上最新的 R 必须使用 backport 的仓库。根据<a href="https://mirrors.ustc.edu.cn/CRAN/bin/linux/debian/README.html#debian_wheezy_oldstable">Debian Package for R Software</a>的描述，需要将如下仓库信息添加到 <code>/etc/apt/sources.list</code> 文件末尾：</p>
<p><code>deb http://&lt;favorite-cran-mirror&gt;/bin/linux/debian wheezy-cran3/</code></p>
<p>对于在下的网络来说，既是以下地址：</p>
<p><code>deb http://mirrors.ustc.edu.cn/CRAN/bin/linux/debian wheezy-cran3/</code></p>
<p>通过 <code>echo</code> 加重定向的方式可以非常方便的将其添加到文件末尾。</p>
<p>然后添加加密公钥到：</p>
<p><code>apt-key adv --keyserver keys.gnupg.net --recv-key 381BA480</code></p>
<p>再下来就是安装了：</p>
<p><code>apt-get update</code>
<code>apt-get install r-base r-base-dev</code></p>
<p>这个过程比较漫长（约200M），一方面是 Debian FTP 的访问速度所限，另一方面则是安装及解包时间了。在耐心等待或者睡一觉之后，就可以开心的在平板上使用 R 语言啦！</p>
<p>对于已经习惯使用图形化 IDE Rstudio 的在下来说，R 终端还是需要熟悉下的：</p>
<ol>
<li>运行脚本需要使用 <code>Rscript</code>，而非 <code>R CMD BATCH</code>。</li>
<li>使用 help.start() 可以启动 HTML 的帮助手册页面，可以在 Android 系统环境下的浏览器中查看。</li>
<li>类似的，图形绘制及表格之类的，也可以通过嵌套在 Shiny 的方式输出到 Web 页面，之后在 Android 系统浏览器中查看。</li>
</ol>
<p>最后说说同一个作者出品的 <a href="https://play.google.com/store/apps/details?id=champion.gnuroot.wheezyx">WheezyX</a> 和<a href="https://play.google.com/store/apps/details?id=com.gnuroot.debian">GNURoot Debian</a>。前者是在启动时初始化一个 vnc 服务，使得可以使用本地或远程的 VNC 客户端看到 X 图形化界面。在下尝试了在其基础上安装 LXDE 桌面环境，在极度漫长的安装过程（包含依赖关系近 700M）后失败，无法启动 LXDE。后者则是该名作者的新作品，按照其说明是新的结合及未来的趋势，不过根据评论来看似乎还有不少问题需要处理。</p>
<p>经过这么一番折腾，感觉 Android 平板还是有不少可以把玩和折腾的地方，特别是对 Linux 用户来说。若是您有更多折腾的经历或心得，不妨来稿或者在评论中分享。</p>
<h3>7 月 22 日更新</h3>
<p>在本文发布第三天，GNURoot Debian 发布了新版本 0.2，这两天再次体（zhe）验（teng）了下：</p>
<ul>
<li>与 GNURoot 完全不同，无法延用之前创建的根文件系统，且仅支持 Debian</li>
<li>升级到 Debian Jessie 8.1 Stable 版本，且架构支持硬浮点 <code>armhf</code></li>
<li>挂载以及和系统交互的方式变化不少，$HOME 分区可以直接在 Android 系统下访问，还有一些奇怪的 <code>mount</code> 输出没看懂</li>
<li>附带的 Jessie 特别精简，连 <code>vi</code> 都没有，创建根分区之后要安装的常用工具不少…</li>
<li>CRAN Backport 里的 R 貌似只有针对 <code>armel</code> 的，而 Jessie Backport 里的版本太老，于是想了想，干脆自己动手编译了 R 3.2.1 版本，总共用时两个半小时，还好</li>
<li>至少在我使用的 Z4 Tablet 上，安装部分应用（比如 git, openssh-client）会提示 <code>Cannot open audit interface</code>，谷歌说可能跟内核或者挂载有关，已经提交 Issue Report 等反馈…</li>
<li>理论上讲 RStudio Server 也可以编译，但是至少需要解决上述的问题才能安装必要的依赖关系。</li>
</ul>
<h3>8 月 4 日更新</h3>
<p>上个周末 GNURoot Debian 发布了 0.26 版本，解决了之前<a href="https://github.com/corbinlc/GNURootDebian/issues/5">反馈的问题</a>，意味着可以编译 RStudio Server 了！</p>
<ul>
<li>首先前往 <a href="https://www.rstudio.com/products/rstudio/download-server/">RStudio 官网</a>下载源代码包。</li>
<li>解压到某处之后，<strong>仔细阅读</strong>其中的 INSTALL 说明。</li>
<li>RStudio 需要 R 的共享库，如果之前手动编译 R 的过程中没加上 <code>--enable-R-shlib</code> 选项的话（竟然不是默认启用），重编译先吧…</li>
<li>根据说明，可以借助 <code>dependencies/linux/install-dependency-debian</code> 文件的内容处理编译 RStudio 的依赖关系。由于 GNURoot Debian 默认没有配置 <code>sudo</code>，这里建议还是<strong>手动安装各个依赖</strong>比较好</li>
<li>几点需要提醒的：</li>
<li>没必要特别安装 OpenJDK 6，在编译 R 的时候所用的 OpenJDK 7 即可</li>
<li>无需担心 AppArmor、Qt SDK 的依赖，Server 版本用不上</li>
<li>解决完 debian 文件所描述的后，参照 <code>common/install-common</code> 里的内容进一步处理依赖关系，同样还是建议参考，但是手动处理，其实也就是手动执行同目录下的其他以 install 开头的脚本。当然在上一步 debian 脚本中通过仓库解决的就不需要了，比如 boost 和 pandoc</li>
<li>此时可以参考 <a href="https://support.rstudio.com/hc/communities/public/questions/200656557-Building-RStudio-on-Ubuntu-Linux-on-ARM">RStudio 论坛</a>上的解答，包括下载最新版本的 Closure Complier 来替换 <code>src/gwt/tools</code>目录中的老版本，已经创建空的 pandoc 目录，都是值得应用的。它还提到了使用 Oracle JDK 8 来加快 GWT 构建，这点我没有尝试，有兴趣也可以用 OpenJDK 8 看看。这篇文档较早，新版本还需要一些 clang 的头文件，也是使用 install 脚本处理就好。</li>
<li>全部依赖关系处理结束之后，返回源代码顶层目录，按照 INSTALL 文档的说明，创建 build 目录并调用 cmake 创建编译配置文件，</li>
<li>若一切正常，就可以使用 <code>make install</code> 开始编译了（没看错，没有 <code>make</code> 步骤）。在 Z4 Tablet 上，GWT 构建果真使用了 90 分钟，而 C++ 代码部分的编译用了 6 至 8 小时（具体时间未知，因为中途睡着了…）</li>
<li>结束之后，继续按照 INSTALL 文档的说明，创建服务所用的运行账户、添加 init.d 配置文件、创建管理脚本符号链接、创建运行时所必要的目录</li>
<li>之后就可以通过 <code>rstudio-server start</code> 启动，然后在系统浏览器中输入 ｀127.0.0.1:8787｀，其中 8787 是 rstudio-server 的默认端口号，就能看到熟悉的 RStduio 登录界面啦！</li>
<li>不过，别高兴的太早…你会发现 root 账户登录不能，提示需要密码，设置密码后还是不行，创建个全新的普通用户，问题依旧，提示 <code>Error occurred during transmission</code>…网上搜到的解决方案提示根分区满了，呃，好像不相关啊…</li>
<li>尝试换用 systemd 的启动脚本时收到提示说 dbus 不可用，不知道这个会不会是原因？</li>
</ul>
<p>所以，RStudio Server 的确可以在 Andriod/GNURoot Debian 环境下正常编译（尽管时间比较长），但是其正常工作，似乎还需要一些研究。</p>
            <p class="post-meta">
                # 
                Tagged as 
                <a href="https://linuxtoy.org/tag/android.html">android</a>,                 <a href="https://linuxtoy.org/tag/debian.html">debian</a>,                 <a href="https://linuxtoy.org/tag/r.html">r</a>                · 
                Edit on <a href="https://github.com/LinuxTOY/linuxtoy.org/blob/master/content/install-debian-and-r-on-android.md">GitHub</a>
            </p>            <!-- <p class="post-meta">&num; <a href="http://resume.linuxtoy.org" title="若有兴趣，欢迎来电 :)">寻 GNU/Linux 相关工作，欢迎联系 :)</a></p> -->
            </div>
        </section>
        <h4>Read More:</h4>
        <div class="nav-left">
        
        <ins class="adsbygoogle" style="display: inline-block; width: 336px; height: 280px;" data-ad-client="ca-pub-9432205671574187" data-ad-slot="6128171428"></ins>
        
        </div>
        <div class="pure-menu">
            <ul class="pure-menu-list">
                <li class="pure-menu-item">
                    <a href="https://linuxtoy.org/archives/debian-for-android-installer-released.html">Debian for Android installer 发布</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://linuxtoy.org/archives/linux-mint-debian-201012.html">Linux Mint Debian 201012</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://linuxtoy.org/archives/humble-bundle-for-android-2.html">Humble Bundle for Android 2</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://linuxtoy.org/archives/firefox-beta-18.html">Firefox 18 Beta</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://linuxtoy.org/archives/debian-installer-60-beta1.html">Debian Installer 6.0 Beta1</a>
                </li>
            </ul>
        </div>
    </div>
    <div id="disqus_thread"></div>
    
    <div class="footer">
        <p class="nav-left">
            <a href="https://linuxtoy.org/archives/ghostery-privacy-browser.html">
                « Ghostery Privacy Browser
            </a>
        </p>
        <p class="nav-right">
            <a href="https://linuxtoy.org/archives/celebrate-ubuntu.html">
                Celebrate Ubuntu 手机黑客马拉松 »
            </a>
        </p>
    </div>
</div>

<div class="content pure-u-1 pure-u-md-1-5">
    <div class="posts">
    
    <ins class="adsbygoogle" style="display: inline-block; width: 300px; height: 250px;" data-ad-client="ca-pub-9432205671574187" data-ad-slot="6262929029"></ins>
    
        <h1 class="content-subhead">Popular Posts</h1>
        <div class="pure-menu">
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/the-perfect-linux-desktop-arch-linux-2007-08-2-1.html">Archlinux 安装指南</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/unix-linux-command-cheat-sheet.html">Unix/Linux 命令速查表</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/efficient-editing-with-vim.html">高效率编辑器 Vim</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/wget-tips.html">Wget 使用技巧</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/playing-around-with-mplayer.html">玩转 MPlayer</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/awesome.html">平铺式窗口管理器 Awesome</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/3_free_antivirus_under_linux.html">Linux 下的桌面级杀毒软件</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/openbox-getting-started-guide.html">窗口管理器 Openbox 入门指南</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/minimalist-install-of-ubuntu.html">最小化安装 Ubuntu</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/5-desktop-environment-for-linux.html">你可能不知道的 Linux 桌面</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/the-7-deadly-linux-commands.html">7 个致命的 Linux 命令</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/lightweight-desktop-compare.html">轻量级桌面环境比较</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/zsh.html">终极 Shell——Zsh</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/6-of-the-best-free-linux-cad-software.html">高品质的免费 Linux CAD 程序</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/game_emulator_for_linux.html">Linux 下的几个游戏模拟器</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/history-command-usage-examples.html">History（历史）命令用法 15 例</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/the-best-tips-and-tricks-for-bash.html">bash 使用技巧</a></li>
                <li class="pure-menu-item"><a href="https://linuxtoy.org/archives/10-oreilly-books.html">10 本 O'Reilly 出版的免费好书</a></li>
            </ul>
        </div>
    </div>
</div>
        </div>

        
        
        
        


    
</body>
</html>
